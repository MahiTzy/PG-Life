{"ast":null,"code":"import _toConsumableArray from\"C:/xampp/htdocs/PGLife/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/xampp/htdocs/PGLife/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/PGLife/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/PGLife/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/PGLife/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import FilterBar from'./FilterBar';import FilterModal from'./FilterModal';import PropertyCard from'./PropertyCard';import NoProperty from'./NoProperty';import{base_path}from'./utils.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={properties:[],sort:\"none\",filter:{gender:\"none\"}};_this.toggleInterested=function(property_id){fetch(\"\".concat(base_path,\"/api/toggle_interested.php?property_id=\").concat(property_id)).then(function(response){return response.json();}).then(function(responseData){if(responseData.success){console.log('Success');_this.updateInterested(property_id);}else if(!responseData.success&&!responseData.is_logged_in){console.log('Not logged in!');window.$(\"#login-modal\").modal(\"show\");}}).catch(function(error){console.log('Error fetching and parsing data',error);});};_this.updateInterested=function(property_id){var updated_properties=_toConsumableArray(_this.state.properties);updated_properties.forEach(function(property){if(property.id===property_id){property.is_interested=!property.is_interested;if(property.is_interested){property.interested_users_count++;}else{property.interested_users_count--;}}});_this.setState({properties:updated_properties});};_this.updateSort=function(sort){_this.setState({sort:sort});};_this.updateFilter=function(gender){_this.setState({filter:{gender:gender}});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var search=window.location.search;var params=new URLSearchParams(search);var city_name=params.get('city');fetch(\"\".concat(base_path,\"/api/get_properties_by_city.php?city=\").concat(city_name)).then(function(response){return response.json();}).then(function(responseData){_this2.setState({properties:responseData});}).catch(function(error){console.log('Error fetching and parsing data',error);});}},{key:\"render\",value:function render(){var _this3=this;var properties=_toConsumableArray(this.state.properties);// Sorting\nif(this.state.sort!==\"none\"){if(this.state.sort===\"desc\"){properties.sort(function(a,b){return b.rent-a.rent;});}else{properties.sort(function(a,b){return a.rent-b.rent;});}}// Filter\nif(this.state.filter.gender!==\"none\"){properties=properties.filter(function(property){return property.gender===_this3.state.filter.gender;});}var property_cards;if(properties.length>0){property_cards=properties.map(function(property){return/*#__PURE__*/_jsx(PropertyCard,{property:property,toggleInterested:function toggleInterested(){return _this3.toggleInterested(property.id);}},property.id);});}else{property_cards=/*#__PURE__*/_jsx(NoProperty,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(FilterBar,{currentSort:this.state.sort,updateSort:this.updateSort,currentFilter:this.state.filter}),property_cards]}),/*#__PURE__*/_jsx(FilterModal,{currentFilter:this.state.filter,updateFilter:this.updateFilter})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/xampp/htdocs/PGLife/react-app/src/App.js"],"names":["React","Component","FilterBar","FilterModal","PropertyCard","NoProperty","base_path","App","state","properties","sort","filter","gender","toggleInterested","property_id","fetch","then","response","json","responseData","success","console","log","updateInterested","is_logged_in","window","$","modal","catch","error","updated_properties","forEach","property","id","is_interested","interested_users_count","setState","updateSort","updateFilter","search","location","params","URLSearchParams","city_name","get","a","b","rent","property_cards","length","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport FilterBar from './FilterBar';\nimport FilterModal from './FilterModal';\nimport PropertyCard from './PropertyCard';\nimport NoProperty from './NoProperty';\nimport { base_path } from './utils.js';\n\nclass App extends Component {\n\n    state = {\n        properties: [],\n        sort: \"none\",\n        filter: {\n            gender: \"none\"\n        }\n    };\n\n    componentDidMount() {\n        const search = window.location.search;\n        const params = new URLSearchParams(search);\n        const city_name = params.get('city');\n\n        fetch(`${base_path}/api/get_properties_by_city.php?city=${city_name}`)\n            .then(response => response.json())\n            .then(responseData => {\n                this.setState({\n                    properties: responseData\n                });\n            })\n            .catch(error => {\n                console.log('Error fetching and parsing data', error);\n            });\n    }\n\n    toggleInterested = property_id => {\n        fetch(`${base_path}/api/toggle_interested.php?property_id=${property_id}`)\n            .then(response => response.json())\n            .then(responseData => {\n                if (responseData.success) {\n                    console.log('Success');\n                    this.updateInterested(property_id);\n                } else if (!responseData.success && !responseData.is_logged_in) {\n                    console.log('Not logged in!');\n                    window.$(\"#login-modal\").modal(\"show\");\n                }\n            })\n            .catch(error => {\n                console.log('Error fetching and parsing data', error);\n            });\n    }\n\n    updateInterested = property_id => {\n        let updated_properties = [...this.state.properties];\n        updated_properties.forEach((property) => {\n            if (property.id === property_id) {\n                property.is_interested = !property.is_interested;\n                if (property.is_interested) {\n                    property.interested_users_count++;\n                } else {\n                    property.interested_users_count--;\n                }\n            }\n        });\n\n        this.setState({\n            properties: updated_properties\n        });\n    }\n\n    updateSort = sort => {\n        this.setState({\n            sort: sort\n        });\n    }\n\n    updateFilter = gender => {\n        this.setState({\n            filter: {\n                gender: gender\n            }\n        });\n    }\n\n    render() {\n        let properties = [...this.state.properties];\n\n        // Sorting\n        if (this.state.sort !== \"none\") {\n            if (this.state.sort === \"desc\") {\n                properties.sort((a, b) => b.rent - a.rent);\n            } else {\n                properties.sort((a, b) => a.rent - b.rent);\n            }\n        }\n\n        // Filter\n        if (this.state.filter.gender !== \"none\") {\n            properties = properties.filter(property =>\n                property.gender === this.state.filter.gender\n            );\n        }\n\n        let property_cards;\n        if (properties.length > 0) {\n            property_cards = properties.map(property =>\n                <PropertyCard\n                    key={property.id}\n                    property={property}\n                    toggleInterested={() => this.toggleInterested(property.id)}\n                />\n            );\n        } else {\n            property_cards = <NoProperty />;\n        }\n\n\n        return (\n            <>\n                <div className=\"page-container\">\n                    <FilterBar\n                        currentSort={this.state.sort}\n                        updateSort={this.updateSort}\n                        currentFilter={this.state.filter}\n                    />\n\n                    {property_cards}\n                </div>\n\n                <FilterModal\n                    currentFilter={this.state.filter}\n                    updateFilter={this.updateFilter}\n                />\n            </>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}